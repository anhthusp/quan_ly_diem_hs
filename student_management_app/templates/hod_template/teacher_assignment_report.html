{% extends 'hod_template/base_template.html' %}
{% block page_title %}üìã Th·ªëng k√™ gi√°o vi√™n gi·∫£ng d·∫°y theo l·ªõp{% endblock %}

{% block main_content %}
<div class="container my-4">
  <div class="card shadow">
    <div class="card-header bg-success text-white">
      <h5><i class="fas fa-chalkboard-teacher"></i> Th·ªëng k√™ gi√°o vi√™n gi·∫£ng d·∫°y theo l·ªõp</h5>
    </div>
    <div class="card-body">
      <form method="get" class="form-inline mb-4">
        <select name="namhoc" class="form-control mr-3" onchange="this.form.submit()">
          <option value="">-- Ch·ªçn nƒÉm h·ªçc --</option>
          {% for y in years %}
            <option value="{{ y }}" {% if y == selected_year %}selected{% endif %}>{{ y }}</option>
          {% endfor %}
        </select>

        <select name="khoi" class="form-control mr-3" onchange="this.form.submit()">
          <option value="">-- Ch·ªçn kh·ªëi --</option>
          {% for k in khois %}
            <option value="{{ k }}" {% if k|stringformat:"s" == selected_khoi %}selected{% endif %}>Kh·ªëi {{ k }}</option>
          {% endfor %}
        </select>

        <select name="lop" class="form-control mr-3" onchange="this.form.submit()">
          <option value="">-- Ch·ªçn l·ªõp --</option>
          {% for lop in classes %}
            <option value="{{ lop.MaLOP }}" {% if lop.MaLOP == selected_class %}selected{% endif %}>{{ lop.TenLOP }}</option>
          {% endfor %}
        </select>

        {% comment %} <button type="submit" class="btn btn-primary">Xem th√¥ng tin</button> {% endcomment %}
      </form>

      {% if assignments %}
      <div class="table-responsive">
        <table class="table table-bordered table-hover text-center">
          <thead class="thead-dark">
            <tr>
              <th>#</th>
              <th>M√¥n H·ªçc</th>
              <th>Gi√°o Vi√™n Gi·∫£ng D·∫°y</th>
            </tr>
          </thead>
          <tbody>
            {% for a in assignments %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ a.MaMH.TenMH }}</td>
                <td>{{ a.MaGV.HoTen }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% elif selected_class %}
        <div class="alert alert-warning">Ch∆∞a c√≥ m√¥n h·ªçc n√†o ƒë∆∞·ª£c g√°n cho l·ªõp n√†y trong nƒÉm h·ªçc {{ selected_year }}.</div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
